<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.35">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/wand-magic-sparkles-solid.svg"><title>前端面试题汇总-js-3 | 议题引擎</title><meta name="description" content="前端面试题汇总-js-3## XSS### XSS是什么XSS是一种经常出现在web应用中的计算机安全漏洞，它允许恶意web用户将代码植入到提供给其它用户使用的页面中。比如这些代码包括HTML代码和客户端脚本。攻击者利用XSS漏洞旁路掉访问控制——例如同源策略(same origin policy)。这种类型的漏洞由于被黑客用来编写危害性更大的网络钓鱼(Phishing) ...">
    <link rel="modulepreload" href="/issues-engine/assets/app.0702af34.js"><link rel="modulepreload" href="/issues-engine/assets/2020-8-29-frontend-js3.html.c7360084.js"><link rel="modulepreload" href="/issues-engine/assets/2020-8-29-frontend-js3.html.05a7a10f.js"><link rel="prefetch" href="/issues-engine/assets/index.html.0aa8fa78.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-24-哈希表概念与实现.html.6b596ec1.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-24-栈与队列实现.html.d7111f6b.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-24-链表实现.html.524f0667.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-24-集合实现与数组api相似操作.html.07655d45.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-28-二叉树概念与二叉搜索树实现.html.92514416.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-29-简单数据结构比较.html.9db14317.js"><link rel="prefetch" href="/issues-engine/assets/2020-8-27-frontend-css1.html.bb2e73e7.js"><link rel="prefetch" href="/issues-engine/assets/2020-8-28-frontend-css2.html.fc86c67e.js"><link rel="prefetch" href="/issues-engine/assets/2020-8-29-frontend-js1.html.52cb4ae8.js"><link rel="prefetch" href="/issues-engine/assets/2020-8-29-frontend-js2.html.b9649331.js"><link rel="prefetch" href="/issues-engine/assets/2020-8-30-frontend-brower1.html.456b654e.js"><link rel="prefetch" href="/issues-engine/assets/2020-8-30-frontend-brower2.html.269028e1.js"><link rel="prefetch" href="/issues-engine/assets/2020-8-31-frontend-brower3.html.7ca8f5a6.js"><link rel="prefetch" href="/issues-engine/assets/2020-8-31-frontend-brower4.html.35638141.js"><link rel="prefetch" href="/issues-engine/assets/2021-2-23-proxy.html.7e5b8603.js"><link rel="prefetch" href="/issues-engine/assets/2022-1-11md-test.html.701524b1.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-15-开发者工具.html.8ed45c60.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-22-开发者文档.html.46d5c700.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-21-currying.html.6d3b7251.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-22-promise.html.621c9baa.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-31-华为od机试题目.html.234934ac.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-5-手写函数.html.a0332d3e.js"><link rel="prefetch" href="/issues-engine/assets/2022-stars-Interview__Question.html.0bb8d26c.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-5-移动端总结1.html.e4014bd4.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-23-MySQL笔记.html.1c24b009.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-21-React父子通信.html.46a0a8b2.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-25-React-Hooks逻辑复用-多种实现比较.html.7b051d6e.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-26-Adding-States-to-Components.html.03334d67.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-4-React.memo.html.39822dda.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-8-stale-Closure-in-useEffect.html.f8fc5f30.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-21-Vue3基本实践-通信-指令-ref_reactive-setup.html.fb531f0b.js"><link rel="prefetch" href="/issues-engine/assets/404.html.34ce071f.js"><link rel="prefetch" href="/issues-engine/assets/index.html.72de904a.js"><link rel="prefetch" href="/issues-engine/assets/index.html.c8a29f07.js"><link rel="prefetch" href="/issues-engine/assets/index.html.451ae1fc.js"><link rel="prefetch" href="/issues-engine/assets/index.html.da1ad6b2.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-24-哈希表概念与实现.html.28d49f6a.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-24-栈与队列实现.html.8c042f83.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-24-链表实现.html.cd3983a5.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-24-集合实现与数组api相似操作.html.6f42bb75.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-28-二叉树概念与二叉搜索树实现.html.fb6c5fd3.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-29-简单数据结构比较.html.0f373aff.js"><link rel="prefetch" href="/issues-engine/assets/2020-8-27-frontend-css1.html.4b8dbcb0.js"><link rel="prefetch" href="/issues-engine/assets/2020-8-28-frontend-css2.html.f63b1e9a.js"><link rel="prefetch" href="/issues-engine/assets/2020-8-29-frontend-js1.html.62537066.js"><link rel="prefetch" href="/issues-engine/assets/2020-8-29-frontend-js2.html.73d4c34d.js"><link rel="prefetch" href="/issues-engine/assets/2020-8-30-frontend-brower1.html.472eff52.js"><link rel="prefetch" href="/issues-engine/assets/2020-8-30-frontend-brower2.html.3eeddf8c.js"><link rel="prefetch" href="/issues-engine/assets/2020-8-31-frontend-brower3.html.d35fe93d.js"><link rel="prefetch" href="/issues-engine/assets/2020-8-31-frontend-brower4.html.b4d307f3.js"><link rel="prefetch" href="/issues-engine/assets/2021-2-23-proxy.html.344c83f2.js"><link rel="prefetch" href="/issues-engine/assets/2022-1-11md-test.html.9b0ac2e9.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-15-开发者工具.html.a060da88.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-22-开发者文档.html.0f1ea1d7.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-21-currying.html.b71b64ff.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-22-promise.html.b00bd9ed.js"><link rel="prefetch" href="/issues-engine/assets/2022-3-31-华为od机试题目.html.649ddd57.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-5-手写函数.html.9240adc3.js"><link rel="prefetch" href="/issues-engine/assets/2022-stars-Interview__Question.html.3d9e52ee.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-5-移动端总结1.html.d7c53e39.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-23-MySQL笔记.html.0488e0f1.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-21-React父子通信.html.70979456.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-25-React-Hooks逻辑复用-多种实现比较.html.bb212273.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-26-Adding-States-to-Components.html.4ce8d141.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-4-React.memo.html.b2589b01.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-8-stale-Closure-in-useEffect.html.4533d370.js"><link rel="prefetch" href="/issues-engine/assets/2022-4-21-Vue3基本实践-通信-指令-ref_reactive-setup.html.aaca1edc.js"><link rel="prefetch" href="/issues-engine/assets/404.html.93146c89.js"><link rel="prefetch" href="/issues-engine/assets/index.html.97f4289c.js"><link rel="prefetch" href="/issues-engine/assets/index.html.7c8b0471.js"><link rel="prefetch" href="/issues-engine/assets/index.html.71497e48.js"><link rel="prefetch" href="/issues-engine/assets/404.194390d5.js"><link rel="prefetch" href="/issues-engine/assets/Timeline.af9d2264.js"><link rel="prefetch" href="/issues-engine/assets/Comment.7ee3c986.js"><link rel="prefetch" href="/issues-engine/assets/Tags.0e52b73f.js"><link rel="prefetch" href="/issues-engine/assets/Favorites.9a6967ac.js"><link rel="prefetch" href="/issues-engine/assets/vanilla-tilt.es2015.23c0b18e.js"><link rel="prefetch" href="/issues-engine/assets/lightgallery.es5.a2f185c8.js">
    <link rel="stylesheet" href="/issues-engine/assets/style.f947f55a.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="dog"><!--[--><!--[--><header class="header"><div class="header-main"><div class="logo">buuoltwo的博客</div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><nav class="nav"><!--[--><a href="/issues-engine/" class="link" target="_self">Home</a><a href="/issues-engine/timeline" class="link" target="_self">Timeline</a><a href="/issues-engine/tag" class="link" target="_self">Tags</a><!--]--></nav></div></header><div class="header-mobile"><div class="logo">buuoltwo的博客</div><div class="menu-btn"><i class="iconfont icon-hanbaocaidan"></i></div></div><nav class="nav-mobile" style="display:none;"><!--[--><a href="/issues-engine/" class="link">Home</a><a href="/issues-engine/timeline" class="link">Timeline</a><a href="/issues-engine/tag" class="link">Tags</a><!--]--></nav><!--]--><!--]--><div class="body"><!--[--><!--[--><div class="sidebar-box"><div class="con"><aside class="dog-sidebar"><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">前端面试题汇总-js-3 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/issues-engine/posts/presetArticles/2020-8-29-frontend-js3.html#xss" class="router-link-active router-link-exact-active sidebar-item" aria-label="XSS"><!--[--><!--]--> XSS <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/issues-engine/posts/presetArticles/2020-8-29-frontend-js3.html#xss是什么" class="router-link-active router-link-exact-active sidebar-item" aria-label="XSS是什么"><!--[--><!--]--> XSS是什么 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/issues-engine/posts/presetArticles/2020-8-29-frontend-js3.html#特点" class="router-link-active router-link-exact-active sidebar-item" aria-label="特点"><!--[--><!--]--> 特点 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/issues-engine/posts/presetArticles/2020-8-29-frontend-js3.html#原因" class="router-link-active router-link-exact-active sidebar-item" aria-label="原因"><!--[--><!--]--> 原因 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/issues-engine/posts/presetArticles/2020-8-29-frontend-js3.html#危害" class="router-link-active router-link-exact-active sidebar-item" aria-label="危害"><!--[--><!--]--> 危害 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/issues-engine/posts/presetArticles/2020-8-29-frontend-js3.html#如何防范" class="router-link-active router-link-exact-active sidebar-item" aria-label="如何防范"><!--[--><!--]--> 如何防范 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/issues-engine/posts/presetArticles/2020-8-29-frontend-js3.html#csrf" class="router-link-active router-link-exact-active sidebar-item" aria-label="CSRF"><!--[--><!--]--> CSRF <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/issues-engine/posts/presetArticles/2020-8-29-frontend-js3.html#特点-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="特点"><!--[--><!--]--> 特点 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/issues-engine/posts/presetArticles/2020-8-29-frontend-js3.html#防御" class="router-link-active router-link-exact-active sidebar-item" aria-label="防御"><!--[--><!--]--> 防御 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/issues-engine/posts/presetArticles/2020-8-29-frontend-js3.html#同源策略" class="router-link-active router-link-exact-active sidebar-item" aria-label="同源策略"><!--[--><!--]--> 同源策略 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/issues-engine/posts/presetArticles/2020-8-29-frontend-js3.html#跨域" class="router-link-active router-link-exact-active sidebar-item" aria-label="跨域"><!--[--><!--]--> 跨域 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/issues-engine/posts/presetArticles/2020-8-29-frontend-js3.html#jsonp" class="router-link-active router-link-exact-active sidebar-item" aria-label="JSONP"><!--[--><!--]--> JSONP <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/issues-engine/posts/presetArticles/2020-8-29-frontend-js3.html#域名收敛" class="router-link-active router-link-exact-active sidebar-item" aria-label="域名收敛"><!--[--><!--]--> 域名收敛 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside></div></div><div class="md-body sino sino-kai"><div class="default-content"><!--[--><h1 id="前端面试题汇总-js-3" tabindex="-1"><a class="header-anchor" href="#前端面试题汇总-js-3">¶</a> <span class="prefix"></span><span class="content" id="前端面试题汇总-js-3"><a class="header-anchor" href="#前端面试题汇总-js-3" aria-hidden="true">#</a> 前端面试题汇总-js-3</span><span class="suffix"></span></h1><h2 id="xss" tabindex="-1"><a class="header-anchor" href="#xss">¶</a> <span class="prefix"></span><span class="content" id="xss"><a class="header-anchor" href="#xss" aria-hidden="true">#</a> XSS</span><span class="suffix"></span></h2><h3 id="xss是什么" tabindex="-1"><a class="header-anchor" href="#xss是什么">¶</a> <span class="prefix"></span><span class="content" id="xss是什么"><a class="header-anchor" href="#xss是什么" aria-hidden="true">#</a> XSS是什么</span><span class="suffix"></span></h3><p>XSS是一种经常出现在web应用中的计算机安全漏洞，它允许恶意web用户将代码植入到提供给其它用户使用的页面中。</p><p>比如这些代码包括HTML代码和客户端脚本。攻击者利用XSS漏洞旁路掉访问控制——例如同源策略(same origin policy)。</p><p>这种类型的漏洞由于被黑客用来编写危害性更大的网络钓鱼(Phishing)攻击而变得广为人知。<br> 对于跨站脚本攻击，黑客界共识是：跨站脚本攻击是新型的“缓冲区溢出攻击“，而JavaScript是新型的“ShellCode”。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 示例：</span>
<span class="token comment">// &lt;script&gt;alert(document.cookie)&lt;/script&gt;</span>
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1651016432992-35225">复制成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="// 示例：
// &lt;script&gt;alert(document.cookie)&lt;/script&gt;
" data-mdic-attach-content="" data-mdic-notify-id="j-notify-1651016432992-35225" data-mdic-notify-delay="1000" data-mdic-copy-fail-text="复制失败" onclick="!function(t){const e={copy:(t=&#39;&#39;,e=&#39;&#39;)=&gt;new Promise((c,o)=&gt;{const n=document.createElement(&#39;textarea&#39;),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand(&#39;copy&#39;);document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display=&#39;block&#39;,setTimeout(()=&gt;{n.style.display=&#39;none&#39;},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制</button></div></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="特点" tabindex="-1"><a class="header-anchor" href="#特点">¶</a> <span class="prefix"></span><span class="content" id="特点"><a class="header-anchor" href="#特点" aria-hidden="true">#</a> 特点</span><span class="suffix"></span></h3><p>能注入恶意的HTML/JavaScript代码到用户浏览的网页上，从而达到Cookie资料窃取、会话劫持、钓鱼欺骗等攻击。 <code>&lt;攻击代码不一定（非要）在 &lt;script&gt;&lt;/script&gt; 中&gt;</code></p><h3 id="原因" tabindex="-1"><a class="header-anchor" href="#原因">¶</a> <span class="prefix"></span><span class="content" id="原因"><a class="header-anchor" href="#原因" aria-hidden="true">#</a> 原因</span><span class="suffix"></span></h3><ul><li><p>Web浏览器本身的设计不安全。浏览器能解析和执行JS等代码，但是不会判断该数据和程序代码是否恶意。</p></li><li><p>输入和输出是Web应用程序最基本的交互，而且网站的交互功能越来越丰富。如果在这过程中没有做好安全防护，很容易会出现XSS漏洞。</p></li><li><p>程序员水平参差不齐，而且大都没有过正规的安全培训，没有相关的安全意识。</p></li><li><p>XSS攻击手段灵活多变。</p></li></ul><h3 id="危害" tabindex="-1"><a class="header-anchor" href="#危害">¶</a> <span class="prefix"></span><span class="content" id="危害"><a class="header-anchor" href="#危害" aria-hidden="true">#</a> 危害</span><span class="suffix"></span></h3><ul><li>盗取各类用户帐号，如机器登录帐号、用户网银帐号、各类管理员帐号</li><li>控制企业数据，包括读取、篡改、添加、删除企业敏感数据的能力</li><li>盗窃企业重要的具有商业价值的资料</li><li>非法转账</li><li>强制发送电子邮件</li><li>网站挂马</li><li>控制受害者机器向其它网站发起攻击</li></ul><h3 id="如何防范" tabindex="-1"><a class="header-anchor" href="#如何防范">¶</a> <span class="prefix"></span><span class="content" id="如何防范"><a class="header-anchor" href="#如何防范" aria-hidden="true">#</a> 如何防范</span><span class="suffix"></span></h3><ul><li>将重要的cookie标记为http only, 这样的话Javascript 中的document.cookie语句就不能获取到cookie了.</li><li>表单数据规定值的类型，例如：年龄应为只能为int、name只能为字母数字组合。。。。</li><li>对数据进行Html Encode 处理</li><li>过滤或移除特殊的Html标签， 例如: <code>&lt;script&gt;</code>, <code>&lt;iframe&gt;</code> , <code>&amp;lt; for &lt;</code>, <code>&amp;gt; for &gt;</code>, <code>&amp;quot for</code></li><li>过滤JavaScript 事件的标签。例如 &quot;onclick=&quot;, &quot;onfocus&quot; 等等。</li></ul><p>补充： <br> https://xiedaimala.com/posts/ba2e2d08-30d3-4ded-a049-507580c2cd1b<br></p><p>参考资料：<br> https://www.cnblogs.com/phpstudy2015-6/p/6767032.html<br> https://www.cnblogs.com/443855539-wind/p/6055816.html<br> https://baike.baidu.com/item/XSS%E6%94%BB%E5%87%BB/954065?fr=aladdin</p><h2 id="csrf" tabindex="-1"><a class="header-anchor" href="#csrf">¶</a> <span class="prefix"></span><span class="content" id="csrf"><a class="header-anchor" href="#csrf" aria-hidden="true">#</a> CSRF</span><span class="suffix"></span></h2><p>CSRF（Cross-site request forgery）跨站请求伪造，也被称为“One Click Attack”或者Session Riding，通常缩写为CSRF或者XSRF，是一种对网站的恶意利用。尽管听起来像跨站脚本（XSS），但它与XSS非常不同，XSS利用站点内的信任用户，而CSRF则通过伪装来自受信任用户的请求来利用受信任的网站。与XSS攻击相比，CSRF攻击往往不大流行（因此对其进行防范的资源也相当稀少）和难以防范，所以被认为比XSS更具危险性。</p><blockquote class="multiquote-1"><p>补充</p><p>CSRF (Cross Site Request Forgery)攻击，中文名：跨站请求伪造。其原理是攻击者构造网站后台某个功能接口的请求地址，诱导用户去点击或者用特殊方法让该请求地址自动加载。用户在登录状态下这个请求被服务端接收后会被误以为是用户合法的操作。对于 GET 形式的接口地址可轻易被攻击，对于 POST 形式的接口地址也不是百分百安全，攻击者可诱导用户进入带 Form 表单可用POST方式提交参数的页面。</p></blockquote><h3 id="特点-1" tabindex="-1"><a class="header-anchor" href="#特点-1">¶</a> <span class="prefix"></span><span class="content" id="特点-1"><a class="header-anchor" href="#特点-1" aria-hidden="true">#</a> 特点</span><span class="suffix"></span></h3><ul><li>依靠用户标识危害网站</li><li>利用网站对用户标识的信任</li><li>欺骗用户的浏览器发送HTTP请求给目标站点</li><li>另外可以通过IMG标签会触发一个GET请求，可以利用它来实现CSRF攻击。</li></ul><h3 id="防御" tabindex="-1"><a class="header-anchor" href="#防御">¶</a> <span class="prefix"></span><span class="content" id="防御"><a class="header-anchor" href="#防御" aria-hidden="true">#</a> 防御</span><span class="suffix"></span></h3><ul><li>通过referer、token或者验证码来检测用户提交。</li><li>尽量不要在页面的链接中暴露用户隐私信息。</li><li>对于用户修改删除等操作最好都使用post操作 。</li><li>避免全站通用的cookie，严格设置cookie的域。</li></ul><blockquote class="multiquote-1"><p>补充：</p><ol><li>服务端在收到路由请求时，生成一个随机数，在渲染请求页面时把随机数埋入页面（一般埋入 form 表单内，<input type="hidden" name="_csrf_token" value="xxxx">）</li><li>服务端设置setCookie，把该随机数作为cookie或者session种入用户浏览器</li><li>当用户发送 GET 或者 POST 请求时带上_csrf_token参数（对于 Form 表单直接提交即可，因为会自动把当前表单内所有的 input 提交给后台，包括_csrf_token）</li><li>后台在接受到请求后解析请求的cookie获取_csrf_token的值，然后和用户请求提交的_csrf_token做个比较，如果相等表示请求是合法的。</li></ol><p>注意事项：</p><ol><li>Token 保存在 Session 中。假如 Token 保存在 Cookie 中，用户浏览器开了很多页面。在一些页面 Token 被使用消耗掉后新的Token 会被重新种入，但那些老的 Tab 页面对应的 HTML 里还是老 Token。这会让用户觉得为啥几分钟前打开的页面不能正常提交？</li><li>尽量少用 GET。假如攻击者在我们的网站上传了一张图片，用户在加载图片的时候实际上是向攻击者的服务器发送了请求，这个请求会带有referer表示当前图片所在的页面的 url。 而如果使用 GET 方式接口的话这个 URL 就形如： <a href="https://link.zhihu.com/?target=https%3A//xxxx.com/gift%3FgiftId%3Daabbcc%26_csrf_token%3Dxxxxx" target="_blank" rel="noopener noreferrer">https://xxxx.com/gift?giftId=aabbcc&amp;_csrf_token=xxxxx<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ，那相当于攻击者就获取了_csrf_token，短时间内可以使用这个 token 来操作其他 GET 接口。</li></ol></blockquote><h2 id="同源策略" tabindex="-1"><a class="header-anchor" href="#同源策略">¶</a> <span class="prefix"></span><span class="content" id="同源策略"><a class="header-anchor" href="#同源策略" aria-hidden="true">#</a> 同源策略</span><span class="suffix"></span></h2><p>同源策略可防止 JavaScript 发起跨域请求。源被定义为 URI、主机名和端口号的组合。此策略可防止页面上的恶意脚本通过该页面的文档对象模型，访问另一个网页上的敏感数据。</p><h2 id="跨域" tabindex="-1"><a class="header-anchor" href="#跨域">¶</a> <span class="prefix"></span><span class="content" id="跨域"><a class="header-anchor" href="#跨域" aria-hidden="true">#</a> 跨域</span><span class="suffix"></span></h2><ul><li>原因 <br> 浏览器的同源策略导致了跨域</li><li>作用 <br> 用于隔离潜在恶意文件的重要安全机制</li><li>解决</li></ul><ol><li>jsonp ，允许 script 加载第三方资源</li><li>反向代理（nginx 服务内部配置 Access-Control-Allow-Origin *）</li><li>cors 前后端协作设置请求头部，Access-Control-Allow-Origin 等头部信息</li><li>iframe 嵌套通讯，postmessage</li></ol><p>https://zhuanlan.zhihu.com/p/41479807 <br><a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener noreferrer">跨域资源共享 CORS 阮一峰<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="jsonp" tabindex="-1"><a class="header-anchor" href="#jsonp">¶</a> <span class="prefix"></span><span class="content" id="jsonp"><a class="header-anchor" href="#jsonp" aria-hidden="true">#</a> JSONP</span><span class="suffix"></span></h2><p>这是我认为写得比较通俗易懂的一篇文章 直接转载过来<br> https://blog.csdn.net/hansexploration/article/details/80314948</p><h2 id="域名收敛" tabindex="-1"><a class="header-anchor" href="#域名收敛">¶</a> <span class="prefix"></span><span class="content" id="域名收敛"><a class="header-anchor" href="#域名收敛" aria-hidden="true">#</a> 域名收敛</span><span class="suffix"></span></h2><p>PC 时代为了突破浏览器的域名并发限制。有了域名发散。<br> 浏览器有并发限制，是为了防止DDOS攻击。<br> 域名收敛：就是将静态资源放在一个域名下。减少DNS解析的开销。<br> 域名发散：是将静态资源放在多个子域名下，就可以多线程下载，提高并行度，使客户端加载静态资源更加迅速。<br> 域名发散是pc端为了利用浏览器的多线程并行下载能力。而域名收敛多用与移动端，提高性能，因为dns解析是是从后向前迭代解析，如果域名过多性能会下降，增加DNS的解析开销。</p><!--]--></div></div><!----><div class="bottom reading-progress" data-v-e132c114><div style="" class="progress" data-v-e132c114></div></div><!--]--><!--]--></div><!--[--><footer class="footer"> powered by <a target="_blank" href="https://github.com/artiely"> Artiely</a></footer><!--]--><div class="theme-box"><div class="theme-btn-box"><span class="active theme-btn">晓露</span><span class="theme-btn">寝安</span><span class="theme-btn">浅云</span><span class="theme-btn">逍遥</span><span class="theme-btn">十漾</span><span class="theme-btn">轻拟</span></div><div class="trigger"><i class="iconfont icon-pifu"></i></div></div></div><!----><!--]--></div>
    <script type="module" src="/issues-engine/assets/app.0702af34.js" defer></script>
  </body>
</html>
